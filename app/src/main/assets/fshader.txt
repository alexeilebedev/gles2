precision highp float;
uniform mat4 uMVPMatrix;

void main() {
	vec2 p = (uMVPMatrix * vec4(gl_PointCoord,0,1)).xy;
	vec2 c = p;
	vec3 color = vec3(0.0,0.0,0.0);
	int niter=100;
	for(int i=0; i < niter; i++){
		p= vec2(p.x*p.x-p.y*p.y,2.0*p.x*p.y)+c;
		if (dot(p,p)>4.0){
			float f = 1.f - float(i)/float(niter);
			float g = sin(p.y);
			float b = cos(p.x);
			color = vec3(f,g,b);
			break;
		}
	}
	gl_FragColor.rgb = color;
	gl_FragColor.a = 1.0;
}
